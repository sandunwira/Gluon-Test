import * as Gluon from '../src/index.js';

const window = await Gluon.open('index.html');

window.ipc.expose('wow', () => console.log('wow') || 'it worked');
window.ipc.store.test = 'yes';

window.ipc.expose('now', () => process.hrtime.bigint().toString());
window.ipc.expose('noop', () => {});

window.ipc.on('event now', () => process.hrtime.bigint().toString());
window.ipc.on('event noop', () => {});

setTimeout(() => {
  window.ipc.send('test', 'one');
  window.ipc.send('test', 'two');
}, 1000);

// const myScript = await window.resources.js(`alert(1)`);
// myScript.remove();

const myStyle = await window.resources.css(`* { color: red; }`);

setTimeout(() => {
  myStyle.modify(`* { color: blue; }`);

  setTimeout(() => {
    myStyle.remove();
  }, 5000);
}, 5000);

import openAbout from '../src/menus/about.js';

/* openAbout({
  name: 'Glutester 5000',
  icon: 'https://gluonjs.org/logo.png',
  description: 'Gluon tester app for IPC and the like',
  links: [ { text: 'a link', href: 'https://example.com' } ]
}); */